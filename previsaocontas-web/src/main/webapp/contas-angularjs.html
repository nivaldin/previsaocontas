<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>Contas</title>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script type="text/javascript">
	var app = angular.module('myapp', []);

	app.controller('myappcontroller', function($scope, $http) {
		$scope.contas = []
		$scope.userform = {
			usuario : "",
			senha : ""
		};

		$scope.listarContas = function () {
			$http({
				method : 'GET',
				url : 'rest/contas/11/2017'
			}).then(function successCallback(response) {
				$scope.contas = response.data;
			}, function errorCallback(response) {
				console.log(response.data);
				$scope.contas = [];
				alert(response.data);
			});
		}
		
		$scope.login = function() {
			$http({
				method : 'GET',
				url : 'rest/login/' + $scope.userform.usuario + '/' + $scope.userform.senha
			}).then(function successCallback(response) {
				$scope.listarContas();
			}, function errorCallback(response) {
					console.log(response.data);
					$scope.contas = [];
					alert(response.data);
				}
			);
		}
		
		$scope.logout = function() {
			$http({
				method : 'GET',
				url : 'logout'
			}).then(function successCallback(response) {
				$scope.contas = [];
			}, function errorCallback(response) {
					console.log(response.statusText);
				}
			);
		}

		function disableName() {
			document.getElementById("name").disabled = true;
		}
	});
</script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"/>
</head>
<body ng-app="myapp" ng-controller="myappcontroller">
	<form ng-submit="processUserDetails()">
		<div class="table-responsive">
			<table class="table table-bordered" style="width: 600px">
				<tr>
					<td>Usu√°rio</td>
					<td><input type="text" id="usuario"
						ng-model="userform.usuario" size="30" /></td>
					<td>Senha</td>
					<td><input type="password" id="senha"
						ng-model="userform.senha" size="30" /></td>
					<td><input type="submit" class="btn btn-primary btn-sm"
						ng-click="login()" value="Entrar" /></td>
					<td><input type="submit" class="btn btn-primary btn-sm"
						ng-click="logout()" value="Sair" /></td>
				</tr>
			</table>
		</div>
	</form>
</body>
</html>